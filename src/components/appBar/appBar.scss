
.appBar {
	// Limit transitions to cheaper properties; avoid animating box-shadow directly
	transition: background-color $transition-time-fast;
	padding: 0.8em ($page-margin - 1.7em);
	z-index: 999 !important;
	.flex {
		// Avoid animating padding; it causes layout reflow on each frame.
		transition: background-color $transition-time-fast;
		// Avoid using will-change: scroll-position; it can degrade performance when misused
		// will-change: opacity, transform;
		border-radius: 1000px;
		position: relative;

		// Pseudo-element handles elevation shadow; we animate its opacity
		&::after {
			content: "";
			position: absolute;
			backdrop-filter: blur(40px);
			inset: -0.35em;
			pointer-events: none;
			border-radius: inherit;
			box-shadow: 0 0 25px rgb(0 0 0 / 0.45);
			background: rgb(0 0 0 / 0.4);
			opacity: 0;
			z-index: -1;
			transition: opacity $transition-time-fast;
		}
	}

	// Inner content wrapper that we can scale without causing layout reflow
	.flex-inner {
		transform-origin: top center;
		transition: transform $transition-time-fast;
	}
	&.elevated{
		.flex {
			&::after {
				opacity: 1;
			}
		}

		// Apply a subtle scale to simulate shrink without layout changes
		.flex-inner {
			transform: scaleY(0.95);
		}
	}
	&-avatar {
		background: rgb(255 255 255 / 0.1) !important;
		&-icon {
			color: white;
		}
	}
	&-text {
		opacity: 0.7;
		transition: opacity $transition-time-fast;
		position: relative;
		color: white;
		text-decoration: none;
		&::after {
			content: "";
			width: 100%;
			height: 1.2px;
			background: white;
			opacity: 0.7;
			position: absolute;
			bottom: 4.6px;
			left: 0;
			transform: scaleX(0);
			transition: transform $transition-time-fast,
			background $transition-time-fast,
			opacity $transition-time-fast;
		}
		&:hover {
			opacity: 0.8;
			&::after {
				transform: scaleX(0.25);
				opacity: 0.8;
			}
		}
		&.active {
			opacity: 1;
			color: $clr-accent-default;
			&::after {
				transform: scaleX(0.5);
				opacity: 1;
				background: $clr-accent-default;
			}
		}
	}
}

.library-drawer{
	width: 20em;
	margin: 1.4em;
	height: calc(100vh - 2.8em) !important;
	border-radius: 20px;
	overflow-x: hidden;
	overflow-y: auto;
	.library-drawer-item{
		position: relative;
		overflow: hidden;
		border-radius: 1000px;
		> div::before{
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: transparent;
			transition: $transition-time-default;
			z-index: -1;
			border-radius: 100px;
		}
	}
	.active.library-drawer-item {
		.material-symbols-rounded{
			--fill: 1;
		}
		&> div::before {
			background: $clr-accent-default;
		}
	}
	// Magic scrollbar
	&::-webkit-scrollbar {
		&-thumb {
			height: 150px;
			max-height: 33%;
		}
		&-track {
			margin-top: 15px;
			margin-bottom: 15px;
			background: transparent !important;
		}
	}
}

.appLoading {
	opacity: 0;
}
